@{
    ViewBag.Title = "Dashboard";
}

<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Trackmaster</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    .zoom {
        transition: transform .5s;
        /*transform: scale(1.0);*/
    }

        .zoom:hover {
            /*transform: scale(1.05);*/
            /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
            /*width: 200px;*/
            /*height: 200px;*/
            /*margin-left: 300px;*/
            /*margin-right: auto;*/
        }

    .footerMain {
        width: 100%;
        clear: both;
        padding: 20px 0px;
        display: block;
    }


    #facebook-div, #youtube-div, #instagram-div {
        float: left;
        margin: 0px;
        width: 33%;
        height: 5px;
        background-color: #28a745;
    }

    #facebook-div {
        background-color: #1A537A;
    }

    #youtube-div {
        background-color: #00B74A;
    }

    #instagram-div {
        background-color: #F93154;
    }



    table tr th {
        color: #1A537A;
        font-weight: bold;
        font-size: 9px;
    }
</style>
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>

<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />




<link href="~/Trackmaster_files/Dashboard.css" rel="stylesheet" />


<script src="~/Scripts/app/GeoFenceCustID.js"></script>

<script type="text/javascript">

    $(document).ready(function () {
        $('#dashMap').attr('src', '../../HTML/DashMap.htm?custId=' + $custid);

        $('#topdailyalert').attr('src', '../../HTML/topdailyalert.html?custId=' + $custid);

    });


</script>


<style>
    /* width */
    ::-webkit-scrollbar {
        width: 20px;
        height: 20px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 5px grey;
        border-radius: 10px;
        margin-left: -100px;
        display: none;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #F8F8F8;
        border-radius: 10px;
        display: none;
    }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            /*background: #b30000;*/
        }

    .hideScrollbar::-webkit-scrollbar {
        display: none;
    }
</style>
<h4 style="color:#867f7f;">Dashboard RFID</h4>
<div class="main_container" id="tables_page">

   
    <div class="container-fluid">

        <div class="row-fluid">
            <div class="widget-body">

                <div class="main_container" id="">

                  
                    <div class="row-fluid">
                        <div class="widget-body" style="border: 0">

                            <div class="row-fluid">
                                <div class="widget widget-padding span12">
                                  
                                    <div class="widget-body" style="min-height: auto;">
                                        <div class="box" style="padding-bottom: 0px;">
                                            <div class="box-content padded" style="margin: 0 -11px 0 9px;">
                                                
                                                <div class="row" style="margin-top: -14px;">
                                                    <div class="col-lg-10" style="box-shadow: 0px 1px 19px #dddddd;min-height:633px;">
                                                      
                                                        <div class="col-md-5 zoom" style="box-shadow: 0px 1px 19px #dddddd;  padding: 37px;  background-color: white; height:373px; max-height: 373px;   border-radius: 25px;  margin-top: 2px;    margin-left: -6px;">
                                                            <div class="row-fluid">
                                                                <div class="widget-body" style="border: 0">

                                                                    <div class="row-fluid">
                                                                        <div class="widget widget-padding">

                                                                            <h5 style="color:#867f7f">Daily RFID Punched Details On Vehicle </h5>
                                                                            <h7 style="color:#867f7f;font-weight:bold;font-size:17px;">Total punch on Vehicle</h7>

                                                                            <div class="widget-body zoom" style="min-height: 333px;">

                                                                                <table>
                                                                                    <tr>
                                                                                        <td style="font-size:27px;color:#00B74A;font-weight:bold;">
                                                                                            <span id="dlyrfid">0</span>
                                                                                        </td>

                                                                                    </tr>
                                                                                </table>
                                                                                <br />

                                                                                <div class="row">
                                                                                    <div class="footerMain">

                                                                                        <div id="facebook-div">
                                                                                            <a href="#">&nbsp;</a>
                                                                                        </div>

                                                                                        <div id="youtube-div">
                                                                                            <a href="#">&nbsp;</a>
                                                                                        </div>

                                                                                        <div id="instagram-div">
                                                                                            <a href="#">&nbsp;</a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <br />


                                                                                <div>
                                                                                    <div class="pull-right">
                                                                                        <div style="height: 5px;background-color:#00B74A;width:100%;"></div>

                                                                                    </div>
                                                                                    <div class="pull-left">
                                                                                        <table>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div style="height: 10px;width:10px;  background-color:#614051;"></div>
                                                                                                </td>
                                                                                                <td style="color:#867f7f;font-size:16px;">
                                                                                                    &nbsp;  &nbsp;&nbsp;  Total Vehicle


                                                                                                </td>
                                                                                                <td style="color:#867f7f;font-size:20px;font-weight:bold;">
                                                                                                    &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;  &nbsp;  &nbsp;&nbsp;   <span id="tveh">0</span>


                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div style="height: 10px;width:10px;  background-color:#00B74A;"></div>
                                                                                                </td>
                                                                                                <td style="color:#867f7f;

   font-size:16px;">
                                                                                                    &nbsp;  &nbsp;&nbsp; Punched Vehicle
                                                                                                </td>
                                                                                                <td style="color:#867f7f ;font-size:20px;font-weight:bold;">
                                                                                                    &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;  &nbsp;  &nbsp;&nbsp;  <span id="pnchveh">0</span>


                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div style="height: 10px;width:10px;  background-color:#dc3545;"></div>
                                                                                                </td>
                                                                                                <td style="color:#867f7f;

   font-size:16px;">
                                                                                                    &nbsp;  &nbsp;&nbsp;Unpunched vehicle
                                                                                                </td>
                                                                                                <td style="color:#867f7f;font-size:20px;font-weight:bold;">
                                                                                                    &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;  &nbsp;  &nbsp;&nbsp;   <span id="unpnchveh">0</span>


                                                                                                </td>
                                                                                            </tr>

                                                                                            <tr>
                                                                                                <td colspan="3">&nbsp;</td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td colspan="3">&nbsp;</td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td colspan="3">&nbsp;</td>
                                                                                            </tr>

                                                                                            <tr>
                                                                                                <td colspan="3" style="color: #867f7f">Percentage of vehicle punched <span id="pnchper">0</span>% & Unpunched percentage is <span id="unpnchper">0</span>%</td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>


                                                                              

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-7 " style="box-shadow: 0px 1px 19px #dddddd; padding: 20px;background-color:white;min-height:333px;border-radius: 25px;  margin-top: 2px;   margin-left: 5px;">
                                                            <div class="row-fluid">
                                                                <div class="widget-body" style="border: 0">

                                                                    <div class="row-fluid">
                                                                        <div class="widget widget-padding">


                                                                            <div class="widget-body zoom" style="min-height: 333px;">
                                                                                <iframe id="dashMap" src="" width="100%" height="333px" frameborder="0" style="border: 0"></iframe>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-5 zoom" style="box-shadow: 0px 1px 19px #dddddd;  padding: 37px;  background-color: white;  height:373px; max-height: 373px; border-radius: 25px; margin-top: 20px; margin-left: -6px;">
                                                            <div class="row-fluid">
                                                                <div class="widget-body" style="border: 0">

                                                                    <div class="row-fluid">
                                                                        <div class="widget widget-padding">

                                                                            <h5 style="color:#867f7f"> Vehicle and RFID Details </h5>
                                                                            <br />

                                                                            <div class="widget-body zoom" style="min-height: 333px;">

                                                                                <table class="table " style="">
                                                                                    <tr>
                                                                                        <td>
                                                                                            Enrolled
                                                                                        </td>
                                                                                        <td>
                                                                                            Total vehicle
                                                                                        </td>
                                                                                        <td>
                                                                                            Unreachable
                                                                                        </td>
                                                                                    </tr>

                                                                                    <tr>
                                                                                        <td style="font-size: 40px;color: #1A537A;font-weight: bold;">
                                                                                            <span id="enrolled">0</span>
                                                                                        </td>
                                                                                        <td style="font-size: 40px;color: #00B74A;font-weight: bold;">
                                                                                            <span id="vehtt">0</span>
                                                                                        </td>
                                                                                        <td style="font-size: 40px;color: #F93154;font-weight: bold;">
                                                                                            <span id="unreach">0</span>
                                                                                        </td>
                                                                                    </tr>



                                                                                </table>

                                                                                Ratio of Total vehicle (48%) and Unreachable Vehicle(56%)
                                                                                <br />
                                                                                <br />
                                                                                <br />

                                                                                <div>
                                                                                    <div class="pull-right" style="border-style:solid;border-width: thin;padding: 12px;border-color: #1A537A;
    border-radius: 22px;">
                                                                                        <table>
                                                                                            <tr>
                                                                                                <td class="pull-left">
                                                                                                    <div style="height: 10px; width: 10px;background-color:#00B74A;"></div>


                                                                                                </td>
                                                                                                <td style="color:#867f7f">
                                                                                                    &nbsp;   &nbsp;   Authorised Punch


                                                                                                </td>
                                                                                                <td style="font-size:17px;color:#00B74A;font-weight:bold;">
                                                                                                    &nbsp;   &nbsp;<span id="auth">0</span>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td class="pull-left">
                                                                                                    <div style="height: 10px; width: 10px;background-color:#F93154;"></div>


                                                                                                </td>
                                                                                                <td style="color:#867f7f">
                                                                                                    &nbsp;   &nbsp;  Unauthorised Punch


                                                                                                </td>
                                                                                                <td style="font-size:17px;color:#F93154;font-weight:bold;" class="pull-right">
                                                                                                    &nbsp;   &nbsp;<span id="unauth">0</span>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>

                                                                                    </div>
                                                                                    <div class="pull-left">
                                                                                        <table>
                                                                                            <tr>
                                                                                                <td style="color:#867f7f">
                                                                                                    Total RFID Punch


                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td style="font-size:25px;color:#1A537A;font-weight:bold;">
                                                                                                    <span id="totalrfid">0</span>
                                                                                                </td>

                                                                                            </tr>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-7 " style="box-shadow: 0px 1px 19px #dddddd; padding: 20px;background-color:white;min-height:333px;margin-top: 20px;    border-radius: 25px; margin-left: 5px;">
                                                            <div class="row-fluid">
                                                                <div class="widget-body" style="border: 0">
                                                                    <div class="row-fluid">


                                                                        <div class="widget widget-padding">

                                                                            <div class="widget-body zoom" style="min-height: 333px;">

                                                                                <iframe src="" id="topdailyalert" width="100%" height="333px" frameborder="0" style="border: 0"></iframe>


                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-2 " style="box-shadow: 0px 1px 19px #dddddd;background-color:white;max-height:777px; overflow-y:auto;  margin-top: 2px;     border-radius: 25px;      margin-left: -11px; ">
                                                        <div class="row-fluid">
                                                            <div class="widget-body" style="border: 0">
                                                                <div class="row-fluid">


                                                                    <div class="widget widget-padding">

                                                                        <div class="widget-body " style="min-height: 757px;">
                                                                            <br />

                                                                            <input type="text" id="myInput" onkeyup="search(this.value)" placeholder="Search for RFID vehicles .." title="Type in a name">

                                                                            <table class="table" id="tblcust">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>Vehicle Name</th>
                                                                                        <th>Authorised Punch</th>
                                                                                        <th>Unauthorised Punch</th>
                                                                                    </tr>

                                                                                </thead>
                                                                                <tbody style="color: #1A537A;
    font-weight:bold;
   font-size:11px;
  "></tbody>


                                                                            </table>


                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>

                                </div>



                            </div>

                        </div>
                    </div>










                </div>

            </div>









        </div>
    </div>

</div>

<div id="ShowMonthlyGraph" title="Basic dialog">
</div>












<script type="text/javascript">





    function search(value) {


        $.ajax({
            type: "Get",
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            url: apiBase.apiurl + "commonapi/Getemployeerfidcard",
            data: { custid: $custid, search: value },
            success: function (data) {

                $('#tblcust tbody').html('');
                for (var i = 0; i <= data.length ; i++) {

                    $('#tblcust tbody').append('<tr ><td>' + data[i].vehname + '</td><td>' + data[i].rfidcard + '</td><td>' + data[i].unrfidcard + '</td></tr>');



                }

            }
        });
    }



    function rfidupdates() {
        $.ajax({
            type: "Get",
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            url: apiBase.apiurl + "commonapi/GetlistofRfid",
            data: { custid: $custid },
            success: function (data) {

                $("#dlyrfid").html(data[0].rfidcount);
                $("#tveh").html(data[0].totalveh);

                $("#pnchveh").html(data[0].punchedveh);
                $("#unpnchveh").html(data[0].unpunchedveh);

                $("#pnchper").html(Math.round((data[0].punchedveh / data[0].totalveh) * 100, 2));
                $("#unpnchper").html(Math.round((data[0].unpunchedveh / data[0].totalveh) * 100, 2));
         
                $("#totalrfid").html(data[0].totalrfid);
                $("#unauth").html(data[0].unauth);
                $("#auth").html(data[0].auth);
                $("#enrolled").html(data[0].enrolled);

                $("#vehtt").html(data[0].totalveh);
                $("#unreach").html(data[0].unreach);

            }
        });


      
    }

    $(document).ready(function () {


        rfidupdates();
        setInterval(rfidupdates, 9 * 1000);



        $.ajax({
            type: "Get",
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            url: apiBase.apiurl + "commonapi/Getemployeerfidcard",
            data: { custid: $custid },
            success: function (data) {


                $('#tblcust tbody').html('');
                for (var i = 0; i <= data.length ; i++) {

                    $('#tblcust tbody').append('<tr ><td>' + data[i].vehname + '</td><td>' + data[i].rfidcard + '</td><td>' + data[i].unrfidcard + '</td></tr>');



                }

            }
        });


    });
</script>

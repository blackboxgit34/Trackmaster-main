@{
    ViewBag.Title = "Dashboard";
}

<!DOCTYPE html>
@*<html class="k-ff k-ff30" lang="en"><head>*@
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Trackmaster</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    .canvasjs-chart-credit {
        display: none !important;
    }

    table#tblTimeZone {
        width: 100%;
    }

    #tblTimeZone tr td {
        height: 70px;
    }
</style>

<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>

<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />
@*    <link rel="shortcut icon" href="http://claas.trackmaster.in/content/res/images/favicon.ico">
    <link href="/Trackmaster_files/font-awesome.css" rel="stylesheet">
    <link href="/Trackmaster_files/stylesad15.css" rel="stylesheet">*@
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
@*<link href="/Trackmaster_files/CssCustom.css" rel="stylesheet">*@


<!--Kendo CSS-->
@*    <link href="/Trackmaster_files/kendo_003.css" rel="stylesheet">
    <link href="/Trackmaster_files/kendo.css" rel="stylesheet">
    <link href="/Trackmaster_files/kendo_004.css" rel="stylesheet">
    <link href="/Trackmaster_files/kendo_002.css" rel="stylesheet">*@
<script src="/Trackmaster_files/amcharts.js"></script>
<script src="/Trackmaster_files/pie.js"></script>
<script type="text/javascript">
    var chart = AmCharts.makeChart("chartdiv", {
        "type": "pie",
        "balloonText": "[[title]]<br><span style='font-size:14px'><b>[[value]]</b></span>",
        "innerRadius": 50,
        "minRadius": 140,
        "labelRadius": -40,
        "labelText": "[[title]]:[[value]]",
        "dataProvider": [{
            "country": "Total",
            "litres": 10
        }, {
            "country": "Running",
            "litres": 8
        }, {
            "country": "Parked",
            "litres": 7
        }, {
            "country": "Ignition On",
            "litres": 6
        }, {
            "country": "Moving",
            "litres": 8
        },
         {
             "country": "Un-reachable",
             "litres": 9
         }],
        "valueField": "litres",
        "titleField": "country"
    });
</script>


<link href="~/Trackmaster_files/Dashboard.css" rel="stylesheet" />


<script src="~/Scripts/app/GeoFenceCustID.js"></script>

<script type="text/javascript">

    $(document).ready(function () {
        $('#dashMap').attr('src', '../../HTML/DashMap.htm?custId=' + $custid);
        $('#vehicleStatusGraph').attr('src', '../../HTML/VehicleStatusGraph.html?custId=' + $custid);
        $('#overSpeedGraph').attr('src', '../../HTML/HtmlGraph.html?custId=' + $custid);
        $('#overStoppageGraph').attr('src', '../../HTML/OverStoppageGraph.html?custId=' + $custid);
        $('#topTenDistance').attr('src', '../../HTML/TopTenDistGraph.html?custId=' + $custid);

    });
</script>


@* <script src="/Trackmaster_files/jquery.js"></script>*@
<div class="main_container" id="tables_page">


    <div class="container-fluid">
        <!-- Side menu -->

        <!-- /Side menu -->

        <!-- Main window -->
        <div class="row-fluid">
            <div class="widget-body">
                <!-- Side menu -->
                <!-- /Side menu -->
                <!-- Main window -->
                <div class="main_container" id="">
                    <div class="row-fluid hidden" id="alertMessage"  style="margin-bottom: 12px; margin-top: 5px;">
                        <div class="widget-body" style="border: 0">
                            <div class="row-fluid">
                                <div  class="widget span12">
                                    <div class="widget-body clearfix" style="overflow-x: auto">
                                        <div id="ReportTotal">
                                            <div class="box">
                                                <div class="box-content padded" style="background: white;">
                                                    <form class="row-fluid">
                                                        <div class="col-md-12" id="alertMessageContainer">
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                        <!--/widget-body-->
                    </div>
                    <div class="row-fluid">
                        <div class="widget-body" style="border: 0">

                            <div class="row-fluid">
                                <div class="widget widget-padding span6">
                                    <div class="widget-header">
                                        <i class="icon-cogs"></i>
                                        <h5>Fleet Management System</h5>
                                        <div class="widget-buttons">
                                            <a href="javascript:void(0)" class="collapse" data-collapsed="false"><i data-title="Collapse" class="icon-chevron-up"></i></a>
                                        </div>
                                    </div>
                                    <div class="widget-body" style="min-height: auto;">
                                        <div class="box" style="padding-bottom: 0px;">
                                            <div class="box-content padded" style="margin: 0 -11px 0 9px;">
                                                <div class="row" style="margin-top: -14px;">

                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/ManageVehicles")">
                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeManageVehicles" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <!--<img src="/Trackmaster_files/icc1.jpg"/ style="margin-left: -17px;">-->
                                                                <img src='~/Trackmaster_files/FMSIcons/AsFMS/manage-vehicl1.png' style="margin-left: -17px;" />
                                                            </div>

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Manage Vehicles</span><br />
                                                            </div>
                                                        </a>
                                                    </div>

                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/ServiceReminders")">
                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeServiceReminders" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/manage-service-reminder1.png" style="margin-left: -17px;" />
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Service Reminders</span>

                                                            </div>
                                                        </a>
                                                    </div>

                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/RenewalReminder")">
                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeRenewalReminders" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Renewal-Remiders1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Renewal Reminders</span>

                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px 4px;">
                                                        <a href="@Url.Content("~/fms/ManageRepairMaintenance")">

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeRepairMaintenance" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Manage-Repair1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Repair and Maintenance</span>

                                                            </div>
                                                        </a>
                                                    </div>

                                                </div>
                                                <!-- end -->


                                                <div class="row" style="margin-top: 6px;">

                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/TyreInventory")">

                                                            <div style="text-align: center; cursor: pointer;">
                                                                <span id="bdgeTyreMgnt" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/manage-tyre-inventory1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Tyre Inventory</span><br />

                                                            </div>
                                                        </a>
                                                    </div>



                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px 0px;">
                                                        <a href="@Url.Content("~/fms/manageparts")">
                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgePartsPurchase" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/manage-parts1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Parts Inventory</span>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/ManageFuel")">

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeFuelMgnt" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Fual-management1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Fuel Management</span>

                                                            </div>
                                                        </a>

                                                    </div>
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px 0px;">
                                                        <a href="@Url.Content("~/fms/OrderBooking")">

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeManageOrders" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Manage-Orders1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Manage Orders</span>

                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                                <!-- end -->

                                                <div class="row" style="margin-top: 6px;">
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px 0px;">
                                                        <a href="@Url.Content("~/fms/ManageEmployee")">
                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgeEmployees" class="badge badge-important" style="position: relative; left: -6px;"></span>

                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Manage-Eimployees1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Employees</span>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px 0px;">
                                                        <a href="@Url.Content("~/fms/ManageVendor")">

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bedgeManageVendors" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/Manage-Vendor1.png" style="margin-left: -17px;">
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Manage Suppliers</span>

                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-2" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">
                                                        <a href="@Url.Content("~/fms/ManageCustomer")">

                                                            <div style="text-align: center; cursor: pointer">
                                                                <span id="bdgCustomer" class="badge badge-important" style="position: relative; left: -6px;"></span>
                                                                <img src="~/Trackmaster_files/FMSIcons/AsFMS/customer1.png" style="margin-left: -17px;" />
                                                            </div>
                                                            <div style="text-align: center;">
                                                                <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Customers</span><br />

                                                            </div>
                                                        </a>
                                                    </div>

                                                </div>
                                                <!-- end -->
                                            </div>
                                        </div>
                                        <!-- /row-fluid -->
                                    </div>
                                    <!-- /widget-body -->
                                </div>

                                <div id="alertss" class="widget span6">
                                    <div class="widget-header">
                                        <i class="fa fa-bar-chart"></i>
                                        <h5>FMS Graphic Analysis</h5>
                                        <div class="widget-buttons">
                                            <a href="javascript:void(0)" class="collapse" data-collapsed="false"><i data-title="Collapse" class="icon-chevron-up"></i></a>
                                        </div>
                                    </div>
                                    <div class="widget-body" style="min-height: 333px;">
                                        <a href="~/fms/fmsgraphs">
                                            <img src="~/Content/img/graphs.JPG" style="height: 333px;">
                                        </a>
                                        @*<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d109750.91902756316!2d76.69637378276995!3d30.72637729725028!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390fed0be66ec96b%3A0xa5ff67f9527319fe!2sChandigarh!5e0!3m2!1sen!2sin!4v1475746744402" width="100%" height="333px" frameborder="0" style="border:0" allowfullscreen></iframe>*@
                                        @*<iframe id="dashMap" src="" width="100%" height="333px" frameborder="0" style="border:0" ></iframe>*@
                                        <!-- /row-fluid -->
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>


                    <div class="row-fluid">
                        <div class="widget-body" style="border: 0">

                            <div class="row-fluid">
                                <div class="widget widget-padding">
                                    <div class="widget-header">
                                        <i class="icon-map-marker"></i>
                                        <h5>Location On Map</h5>
                                        <div class="widget-buttons">
                                            <a href="javascript:void(0)" class="collapse" data-collapsed="false"><i data-title="Collapse" class="icon-chevron-up"></i></a>
                                        </div>
                                    </div>

                                    <div class="widget-body" style="min-height: 333px;">
                                        @*<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d109750.91902756316!2d76.69637378276995!3d30.72637729725028!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390fed0be66ec96b%3A0xa5ff67f9527319fe!2sChandigarh!5e0!3m2!1sen!2sin!4v1475746744402" width="100%" height="333px" frameborder="0" style="border:0" allowfullscreen></iframe>*@
                                        <iframe id="dashMap" src="" width="100%" height="333px" frameborder="0" style="border: 0"></iframe>
                                        <!-- /row-fluid -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row-fluid">
                        <div class="widget widget-padding ">
                            <div class="widget-header">
                                <i class="fa fa-star-half-o" aria-hidden="true"></i>
                                <h5>Special features</h5>
                                <div class="widget-buttons">
                                    <a href="javascript:void(0)" class="collapse" data-collapsed="false"><i data-title="Collapse" class="icon-chevron-up"></i></a>
                                </div>
                            </div>
                            <div class="widget-body" style="min-height: auto;">
                                <div class="box" style="padding-bottom: 0px;">
                                    <div class="box-content padded" style=" background: white;"">
                                        <div class="row" style="margin-top: -14px;">

                                            <div class="col-md-4" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">

                                                <div style="text-align: center;">

                                                    <!--<img src="/Trackmaster_files/icc1.jpg"/ style="margin-left: -17px;">-->
                                                    <a href="/Admin/admindashboard">
                                                        <img src='/Trackmaster_files/Icon_4_20_2017/driver-behaviour.png' onmouseout="this.src='/Trackmaster_files/Icon_4_20_2017/driver-behaviour.png';" onmouseover="this.src='/Trackmaster_files/Icon_4_20_2017/driver-behaviour11.png';" style="margin-left: -17px;">
                                                    </a>
                                                </div>

                                                <div style="text-align: center;">
                                                    <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Driver Behavior</span><br />
                                                </div>
                                            </div>

                                            <div class="col-md-4" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">

                                                <div style="text-align: center;">

                                                    <!--<img src="/Trackmaster_files/icc1.jpg"/ style="margin-left: -17px;">-->
                                                    @*<img src="~/Trackmaster_files/Icon_4_20_2017/driver-behaviour.png" />*@
                                                    <a href="/admin/statusreport">
                                                        <img src='/Trackmaster_files/Icon_4_20_2017/track-dsh.png' onmouseout="this.src='/Trackmaster_files/Icon_4_20_2017/track-dsh.png';" onmouseover="this.src='/Trackmaster_files/Icon_4_20_2017/track-dsh11.png';" style="margin-left: -17px;">
                                                    </a>
                                                </div>

                                                <div style="text-align: center;">
                                                    <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Tracking Dashboard</span><br />
                                                </div>
                                            </div>
                                            
                                            <div class="col-md-4" style="box-shadow: 0px 1px 19px #dddddd; padding: 14px;">

                                                <div style="text-align: center;">

                                                    <!--<img src="/Trackmaster_files/icc1.jpg"/ style="margin-left: -17px;">-->
                                                    @*<img src="~/Trackmaster_files/Icon_4_20_2017/driver-behaviour.png" />*@
                                                    <a href="#" onclick="btnSendSMS();">
                                                        <img src='/Trackmaster_files/FMSIcons/AsFMS/manage-service-reminder1.png' style="margin-left: -17px;">
                                                    </a>
                                                </div>

                                                <div style="text-align: center;">
                                                    <span style="font-size: 11px; font-weight: bold; margin-left: 9px; position: relative; top: 5px;">Send SMS</span><br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row-fluid  ">
                        <div class="widget widget-padding col-md-4">
                            <div class="widget-header">
                                <i class="fa fa-truck"></i>
                                <h5>Vehicles Status</h5>
                            </div>

                            <div class="widget-body clearfix" style="height: auto; background: #fff; text-align: center; overflow-x: hidden; overflow-y: hidden">
                                <iframe src="" id="vehicleStatusGraph" style="width: 414px !important; height: 350px; background-color: #FFFFFF; border: aliceblue;"></iframe>
                            </div>
                        </div>

                        <div class="widget widget-padding col-md-4">
                            <div class="widget-header">
                                <i class="fa fa-pie-chart" aria-hidden="true"></i>
                                <h5>Fleet Utilization Chart</h5>
                            </div>

                            <div class="widget-body clearfix" style="height: auto; background: #fff; text-align: center; overflow-x: hidden; overflow-y: hidden">
                                <iframe src="" id="overStoppageGraph" style="width: 414px !important; height: 350px; background-color: #FFFFFF; border: aliceblue;"></iframe>
                            </div>
                        </div>

                        <div class="widget widget-padding col-md-4">
                            <div class="widget-header">
                                <i class="fa fa-line-chart" aria-hidden="true"></i>

                                <h5>Vehicles Over_Speed </h5>
                                <button onclick="showMonthlyComaprisonGraph(this.id);" id="OverSpeedComp" class="btn pull-right btn-success btn-small" style="margin-top: 2%;">Monthly Comparsion</button>

                            </div>

                            <div class="widget-body clearfix" style="height: auto; background: #fff; text-align: center; overflow-x: hidden; overflow-y: hidden">

                                @*   <div id="chartdiv" style="width: 100%; height: 332px; background-color: #FFFFFF;" >  @Html.Partial("_OverspeedGraph")</div>*@
                                @*@Html.Partial("_OverspeedGraph")*@

                                <iframe src="" id="overSpeedGraph" style="width: 414px !important; height: 350px; background-color: #FFFFFF; border: aliceblue;"></iframe>

                            </div>
                            <!-- /widget-body -->
                        </div>

                    </div>

                </div>
                <!--/widget-body-->
            </div>
            <!-- /row-fluid -->







            <div class="row-fluid">
                <div class="widget-body" style="border: 0">
                    <div class="row-fluid">


                        <div class="widget widget-padding  col-md-4">
                            <div class="widget-header">
                                <i class="fa fa-signal" aria-hidden="true"></i>

                                <h5>Top 10 Travelled Distance</h5>
                                @*<button onclick="location.href='@Url.Action("UpDateSettings", "admin")';"  class="btn pull-right btn-success btn-small" style="margin-top:2%;"><i class="icon-cogs"></i>Update Settings</button>*@

                            </div>
                            <div class="widget-body clearfix" style="height: auto; background: #fff; text-align: center; overflow-x: hidden; overflow-y: hidden">

                                <iframe src="" id="topTenDistance" style="width: 414px !important; height: 350px; background-color: #FFFFFF; border: aliceblue;"></iframe>

                            </div>
                        </div>

                        <div class="widget widget-padding  col-md-4">
                            <div class="widget-header">
                                <i class="fa fa-clock-o" aria-hidden="true"></i>

                                <h5>Time Slots Report</h5>
                                <button onclick="location.href='@Url.Action("GetTimeSlotsReport", "report")';"  class="btn pull-right btn-success btn-small" style="margin-top:2%;"><i class="fa fa-eye"></i>View Report</button>

                            </div>

                            <table class="table table-bordered" id="tblTimeZone" style="width: 100%">
                                <thead>

                                    <tr>
                                        <td>
                                            <h4>Time Slots</h4>
                                        </td>
                                        <td>
                                            <h4>Vehicle Count</h4>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span id="txtMorningSlot">Calculating..</span><span>&nbsp;<img src="~/img/Deshboard_Icon/24-6.png" style="height: 22px; width: 25px;" /></span></td>
                                        <td><span class="btn btn-circle btn-success" id="bdgMorningCount">Calculating...</span> </td>
                                    </tr>
                                    <tr>
                                        <td><span id="txtDaySlot">Calculating..</span><span>&nbsp;
                                            <img src="~/img/Deshboard_Icon/daytime.ico" style="height: 32px; width: 32px;" /></span> </td>
                                        <td><span class="btn btn-circle btn-success" id="bdgDayCount">Calculating...</span></td>
                                    </tr>
                                    <tr>
                                        <td><span id="txtEveningSlot">Calculating..</span><span>&nbsp;<img src="~/img/Deshboard_Icon/sunset.png" style="height: 32px; width: 32px;" /></span> </td>
                                        <td><span class="btn btn-circle btn-success" id="bdgEveningCount">Calculating...</span></td>
                                    </tr>
                                    <tr>
                                        <td><span id="txtNightSlot">Calculating...</span> <span>&nbsp;<img src="~/img/Deshboard_Icon/night.jpg" style="height: 22px; width: 25px;" /></span></td>
                                        <td><span class="btn btn-circle btn-success" id="bdgNightCount">Calculating...</span></td>
                                    </tr>
                                </thead>
                            </table>


                            @*@Html.Action("_DashboardOverSpeedReport", "admin")*@

                        </div>


                        <div class="widget  widget-padding col-md-4" style="overflow: auto; max-height: 420px;">
                            <div class="widget-header">
                                <i class="fa fa-clipboard" aria-hidden="true"></i>

                                <h5>Driver Performance</h5>
                                <button onclick="location.href='@Url.Action("ConsDrvrPrfrmnce", "admin")';"  class="btn pull-right btn-success btn-small" style="margin-top:2%;"><i class="fa fa-eye"></i>View  Report</button>

                            </div>
                            @Html.Action("_DashConsDrvrPrfrmnce", "admin")

                        </div>

                    </div>

                </div>
                <!--/widget-body-->
            </div>
        </div>
    </div>
    <!-- /Main window -->
</div>



<script type="text/javascript">
    var $ = jQuery.noConflict();
</script>

<script type="text/javascript">
    var logErrorUrl = '/Error/LogJavaScriptError';
</script>

<script src="/Trackmaster_files/errorhandler.js" type="text/javascript"></script>

<div id="ShowMonthlyGraph" title="Basic dialog">
</div>


<script type="text/javascript">
    $('.dynamicValues').each(function () {
        var md = $(this).attr("store-mode");
    })
</script>

<script type="text/javascript">
    $('.dynamicValues').each(function () {
        var md = $(this).attr("store-mode");
    })
</script>

<script type="text/javascript">

    $(function () {
        //for alert message on dashboard
        $.ajax({
            url: baseUrl + 'CommonApi/GetMsgForScrollerBanner',
            dataType: "json",
            type: "GET",
            data: { custId: $custid},
            success: function (data) {
                debugger;
                if (data) {
                    $("#alertMessageContainer").html('<p style="color:#7d5a08;">' + data + '</p>');
                    $("#alertMessage").removeClass("hidden");
                }
            }
        });
    });


    $('#BtnChangePass').click(function f() {
        var OldPassword = $('#OldPassword').val();
        OldPassword = OldPassword.trim();
        var NewPassword = $('#NewPassword').val();
        NewPassword = NewPassword.trim();
        var ConfirmNewPassword = $('#ConfirmPassword').val();
        ConfirmNewPassword = ConfirmNewPassword.trim();
        var MyUrl = '/Login/ChangePassword';
        if (NewPassword != '' && OldPassword != '' && ConfirmNewPassword != '') {
            if (ConfirmNewPassword == NewPassword) {
                $("#ValidateMsg").html('');
                $.ajax({
                    url: MyUrl, data: { OldPassword: OldPassword, ConfirmNewPassword: ConfirmNewPassword },
                    success: function (data) {
                        $("#ValidateMsg").html(data);
                        $("#ValidateMsg").css('color', 'green');
                    }
                });
            }
            else {
                $('#ValidateMsg').html("Password doesn't match");
                $("#ValidateMsg").css('color', 'red');
            }
        }
        else {
            $('#ValidateMsg').html("Please fill all the fields");
            $("#ValidateMsg").css('color', 'red');
        }
    });

    //SENDING SMS REGRION
    function btnSendSMS() {
        $.get('@Url.Action("_SendSMS","Common")', function (data) {
            $('#modalInnerContain').html(data);
            $('#modalOuterDiv').modal('show');
        });
    };
  
    //ENDREGION
    //for open model (displaying graph comparison, monthly)
    window.showMonthlyComaprisonGraph = function (id) {
        var baseUrl = apiBase.apiurl;
        var firstMonthCountIn;
        var firstMonthCountOut;
        var seocndMonthCountIn;
        var secondMonthCountOut;
        var reportName;
        var reportNameAsTitle;

        var firstMonthName;
        var secondMonthName;


        $.ajax({
            url: baseUrl + 'ReportsApi/GetMonthlyGraphData',
            dataType: "json",
            type: "GET",
            data: { custId: $custid, flag: id },
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',    //replace /json to the urlenoded
            async: false,

            //  processData: false,
            //  cache: false,
            success: function (data) {
                firstMonthCountIn = data.FirstMonthCountOn;
                firstMonthCountOut = data.FirstMonthCountOff;
                secondMonthCountOut = data.SecondMonthCountOff;
                secondMonthCountIn = data.SecondMonthCountOn;

                firstMonthName = data.MonthOneName;
                secondMonthName = data.MonthSecondName;
                if (id == "OverStoppageComp") {

                    reportNameAsTitle = "Over_Stoppage - Monthly Comparison";
                }
                else {
                    reportNameAsTitle = "Over_Speed - Monthly Comparison";
                }
                reportName = data.ReportName;
            }
        });


        $("#ShowMonthlyGraph").dialog({
            autoOpen: true,
            position: { my: "center", at: "200", of: window },
            width: 1200,
            height: 470,
            resizable: true,
            title: reportNameAsTitle,
            modal: true,
            open: function () {
                $(".ui-dialog-titlebar-close").hide();
                var url = "../report/GetComparisonData?firstMonthCountIn=" + (firstMonthCountIn) + "&firstMonthCountOut=" + firstMonthCountOut + "&secondMonthCountIn=" + secondMonthCountIn + "&secondMonthCountOut=" + (secondMonthCountOut) + "&reportName=" + reportName + "&firstMonthName=" + firstMonthName + "&secondMonthName=" + secondMonthName;
                $(this).load(url);
            },
            buttons: {
                Close: function () {
                    $(this).dialog("close");
                    location.reload(true);
                }
            }
        });
        return false;
    }
    //end of model dialog box for graph comparison


    $(document).ready(function () {

        //FMS Icons
        var baseUrl = apiBase.apiurl;
        $.ajax({
            type: "Get",
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            url: apiBase.apiurl + "Alert/DashFMSAlertsCount",
            data: { custId: $custid },
            success: function (data) {
                $("#bdgeManageVehicles").text(data.ManageVehiclesCount);
                $("#bdgeServiceReminders").text(data.ServiceRemindersCount);
                $("#bdgeRenewalReminders").text(data.RenewalRemindersCount);
                $("#bdgeRepairMaintenance").text(data.RepairAndMaintenanceCount);
                $("#bdgeTyreMgnt").text(data.TyreManagementCount);
                $("#bdgeFuelMgnt").text(data.FuelManagementCount);
                $("#bdgePartsPurchase").text(data.PartsPurchaseCount);
                $("#bdgeEmployees").text(data.EmployeesCount);
                $("#bdgCustomer").text(data.CustomerCount);
                $("#bdgeManageOrders").text(data.BookingOrdersCount);
                $("#bedgeManageVendors").text(data.VendorsCount);
            }
        });

        // TIMEZONE DashBoard
        $.ajax({
            type: "Get",
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            url: apiBase.apiurl + "AdminAPI/TimeZoneDash",
            data: { startDate: $beginDate, endDate: $endDate, custid: $custid, lowerBound: 0, upperBound: 100000, searchText: null },
            success: function (data) {
                $("#bdgMorningCount").text(data.MorningCount);
                $("#bdgDayCount").text(data.DayCount);
                $("#bdgEveningCount").text(data.EveningCount);
                $("#bdgNightCount").text(data.NightCount);
                $("#txtMorningSlot").text(data.MorningSlot);
                $("#txtDaySlot").text(data.DaySlot);
                $("#txtEveningSlot").text(data.EveningSlot);
                $("#txtNightSlot").text(data.NightSlot);
            }
        });
    });
</script>

